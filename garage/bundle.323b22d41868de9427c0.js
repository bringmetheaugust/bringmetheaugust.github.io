(()=>{"use strict";const e=document.getElementById("curtain"),t=document.querySelector("header"),n=document.getElementById("b-logo"),s=document.getElementById("consulstation-fixed"),o="active";function i(e){if("boolean"==typeof e)return this.classList.remove(o);this.classList.toggle(o),c()}function c(n=!1){document.body.classList.toggle("no-scroll"),e.classList.toggle(o),"object"==typeof n&&(i.call(t,!1),i.call(s,!1))}window.addEventListener("scroll",(()=>n.style.opacity=.1-25e-6*window.pageYOffset)),document.getElementById("burger-menu").addEventListener("click",i.bind(t)),[...document.querySelectorAll("header nav a")].forEach((e=>{e.addEventListener("click",(()=>{t.classList.contains(o)&&i.call(t)}))})),[document.getElementById("consultation-call"),document.getElementById("consultation-close")].forEach((e=>{e.addEventListener("click",i.bind(s))})),e.addEventListener("click",c);class a{static notificationWrap=document.getElementById("notifications");static alertTypes={success:"success",error:"error"};constructor(e,t){this.type=e,this.message=t,this.create()}create(){a.notificationWrap.children.length&&(a.notificationWrap.innerHTML=""),this.div=document.createElement("div"),this.div.classList.add(a.alertTypes[this.type]),this.div.innerHTML=this.message,a.notificationWrap.appendChild(this.div),setTimeout(this.delete.bind(this),5e3)}delete(){a.notificationWrap.removeChild(this.div)}}async function l(e){e.preventDefault();const{target:t}=e;try{const{ok:e,status:n}=await fetch("http://localhost:2101/api/callme",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({phone:document.getElementById("consultation-tel").value,name:document.getElementById("consultation-name").value})});if(!e)throw new Error(n);t.classList.add("loading"),new a(a.alertTypes.success,"Ваш запрос отправлен. Наш специалист скоро с Вами свяжется"),s.classList.contains(o)&&(s.classList.remove(o),c())}catch({message:e}){const{error:t}=a.alertTypes;switch(e){case 400:return new a(t,"Неверно указанные данные");case 403:return new a(t,"Вы уже отправляли запрос<br>Попробуйте еще раз через 10 минут");default:new a(t,"Извините, произошла ошибка")}}finally{t.classList.remove("loading")}}function r(){const e=window.pageYOffset/10;[...document.getElementById("about-sliders").children].forEach(((t,n)=>{t.style.transform=`translateX(${n%2==0?e:-e}px) translateY(${e}px)`}))}[...document.querySelectorAll(".consultation-form")].forEach((e=>{e.addEventListener("submit",l)})),new IntersectionObserver((function(e){e[0].isIntersecting?document.addEventListener("scroll",r):document.removeEventListener("scroll",r)}),{root:null,rootMargin:"0px",threshold:0}).observe(document.getElementById("about-slider"))})();